<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="UI_Demo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:UI_Demo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="Transparent"
    mc:Ignorable="d">
    <Page.Resources>
        <!--
            === Settings Flyout ===
        -->
        <Flyout
            x:Key="SettingsFlyout"
            x:Name="SettingsFlyout"
            OverlayInputPassThroughElement="{x:Bind SettingsBar}"
            Placement="LeftEdgeAlignedBottom">
            <Flyout.FlyoutPresenterStyle>
                <Style TargetType="FlyoutPresenter">
                    <Setter Property="CornerRadius" Value="5" />
                    <Setter Property="Background" Value="#99202020" />
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="IsTabStop" Value="True" />
                    <Setter Property="TabNavigation" Value="Cycle" />
                </Style>
            </Flyout.FlyoutPresenterStyle>
            <StackPanel
                Padding="20,14,20,14"
                Background="Transparent"
                BorderBrush="Transparent"
                BorderThickness="2"
                CornerRadius="4"
                Orientation="Vertical"
                Spacing="4">
                <TextBlock
                    Margin="0,0,0,6"
                    HorizontalAlignment="Left"
                    FontSize="16"
                    FontWeight="Medium"
                    Foreground="#FF76B9ED"
                    Text="Execution Delay Time" />
                <!--#region[DividerBar]-->
                <Grid
                    Margin="0,0,0,6"
                    ColumnSpacing="0"
                    RowSpacing="0">
                    <Rectangle
                        Height="2"
                        Margin="0,2,0,0"
                        HorizontalAlignment="Stretch"
                        RadiusX="4"
                        RadiusY="4">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="1,0" EndPoint="1,1">
                                <LinearGradientBrush.GradientStops>
                                    <GradientStop Offset="0" Color="#FF76B9ED" />
                                    <GradientStop Offset="0.2" Color="#6F76B9ED" />
                                    <GradientStop Offset="1" Color="#2F76B9ED" />
                                </LinearGradientBrush.GradientStops>
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                    <Rectangle
                        Height="2"
                        Margin="0,-2,0,0"
                        HorizontalAlignment="Stretch"
                        Fill="Gray"
                        RadiusX="4"
                        RadiusY="4" />
                </Grid>
                <!--#endregion-->
                <StackPanel Orientation="Vertical" Spacing="2">
                    <RadioButton
                        Command="{x:Bind SwitchDelayCommand}"
                        Content="Long"
                        GroupName="AppDelay"
                        IsChecked="{x:Bind Delay, Mode=OneWay, Converter={StaticResource EnumToBoolean}, ConverterParameter=Long}"
                        IsEnabled="{Binding SwitchDelayCommand.CanExecute, Mode=OneWay}">
                        <RadioButton.CommandParameter>
                            <x:String>Long</x:String>
                        </RadioButton.CommandParameter>
                    </RadioButton>
                    <RadioButton
                        Command="{x:Bind SwitchDelayCommand}"
                        Content="Medium"
                        GroupName="AppDelay"
                        IsChecked="{x:Bind Delay, Mode=OneWay, Converter={StaticResource EnumToBoolean}, ConverterParameter=Medium}"
                        IsEnabled="{Binding SwitchDelayCommand.CanExecute, Mode=OneWay}">
                        <RadioButton.CommandParameter>
                            <x:String>Medium</x:String>
                        </RadioButton.CommandParameter>
                    </RadioButton>
                    <RadioButton
                        Command="{x:Bind SwitchDelayCommand}"
                        Content="Short"
                        GroupName="AppDelay"
                        IsChecked="{x:Bind Delay, Mode=OneWay, Converter={StaticResource EnumToBoolean}, ConverterParameter=Short}"
                        IsEnabled="{Binding SwitchDelayCommand.CanExecute, Mode=OneWay}">
                        <RadioButton.CommandParameter>
                            <x:String>Short</x:String>
                        </RadioButton.CommandParameter>
                    </RadioButton>
                </StackPanel>
            </StackPanel>
        </Flyout>
    </Page.Resources>
    <Grid x:Name="root">

        <SplitView
            x:Name="MessageSplitView"
            Margin="0,10,-10,0"
            CompactPaneLength="96"
            CornerRadius="6"
            DisplayMode="Overlay"
            IsPaneOpen="False"
            OpenPaneLength="320"
            PanePlacement="Right">
            <SplitView.Pane>
                <!--#region [PubSub Messages]-->
                <Grid>
                    <local:CompositionShadow
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        BlurRadius="4"
                        OffsetX="14"
                        OffsetY="15"
                        ShadowOpacity="1"
                        Color="#000000">
                        <Image
                            Width="150"
                            Margin="10"
                            Opacity="0.2"
                            Source="ms-appx:///Assets/MessageIcon.png"
                            Stretch="Uniform" />
                    </local:CompositionShadow>
                    <ScrollViewer VerticalScrollMode="Auto">
                        <ListView
                            x:Name="lvChannelMessages"
                            Margin="0,0,10,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Background="Transparent"
                            Opacity="1">
                            <!--
                    <ListView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid HorizontalChildrenAlignment="Left" Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ListView.ItemsPanel>
                            -->
                            <ListView.Transitions>
                                <TransitionCollection>
                                    <EdgeUIThemeTransition />
                                </TransitionCollection>
                            </ListView.Transitions>
                            <ListView.ItemTemplate>
                                <DataTemplate x:DataType="local:ApplicationMessage">
                                    <Grid Margin="0,3,0,3">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                        </Grid.RowDefinitions>
                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <local:CompositionShadow
                                                Grid.Column="0"
                                                Margin="2,2,4,2"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                BlurRadius="1"
                                                OffsetX="2"
                                                OffsetY="2"
                                                ShadowOpacity="0.9"
                                                Color="#000000">
                                                <TextBlock
                                                    FontSize="{StaticResource FontSizeNormal}"
                                                    Foreground="{StaticResource PrimaryBrush}"
                                                    Text="{x:Bind Module, Mode=OneWay}" />
                                            </local:CompositionShadow>
                                            <TextBlock
                                                Grid.Column="1"
                                                Margin="4,2,2,2"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                FontSize="{StaticResource FontSizeNormal}"
                                                Foreground="{StaticResource HeaderBrush}"
                                                Text="{x:Bind MessageTime, Mode=OneWay, Converter={StaticResource StringToFormat}, ConverterParameter='{}{0:ddd, dd MMM yyyy – hh:mm:ss tt}'}" />
                                        </Grid>
                                        <TextBlock
                                            Grid.Row="1"
                                            Margin="2"
                                            HorizontalAlignment="Left"
                                            VerticalAlignment="Center"
                                            FontSize="{StaticResource FontSizeNormal}"
                                            Foreground="{StaticResource SecondaryBrush}"
                                            Text="{x:Bind MessageText, Mode=OneWay}" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </ScrollViewer>
                </Grid>
                <!--#endregion-->
            </SplitView.Pane>

            <Grid
                x:Name="host"
                Background="#00111111"
                PointerPressed="HostGridOnPointerPressed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.Resources>
                    <!--#region [Right-Click Context Flyout Menu]-->
                    <MenuFlyout
                        x:Name="TitlebarMenuFlyout"
                        x:FieldModifier="public"
                        Placement="BottomEdgeAlignedLeft">
                        <MenuFlyoutItem
                            Click="MenuFlyoutItemOnClick"
                            IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                            Tag="{x:Bind TitlebarMenuFlyout}"
                            Text="Hide this flyout">
                            <MenuFlyoutItem.Icon>
                                <FontIcon Glyph="{StaticResource PointerHand}" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem
                            Click="MenuFlyoutItemOnClick"
                            IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                            Tag="ActionToken"
                            Text="Signal cancel token">
                            <MenuFlyoutItem.Icon>
                                <FontIcon Glyph="{StaticResource NoiseCancelation}" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutItem
                            Click="MenuFlyoutItemOnClick"
                            IsEnabled="{x:Bind local:App.Profile.FirstRun.Equals(x:True), Mode=OneWay}"
                            Tag="ActionFirstRun"
                            Text="Reset FirstRun">
                            <MenuFlyoutItem.Icon>
                                <FontIcon Glyph="{StaticResource ActionCenter}" />
                            </MenuFlyoutItem.Icon>
                        </MenuFlyoutItem>
                        <MenuFlyoutSeparator Width="200" />
                        <MenuFlyoutItem
                            Click="MenuFlyoutItemOnClick"
                            IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                            Tag="ActionClose"
                            Text="Close Application">
                            <MenuFlyoutItem.Icon>
                                <FontIcon Glyph="{StaticResource PowerButton}" />
                            </MenuFlyoutItem.Icon>
                            <MenuFlyoutItem.KeyboardAccelerators>
                                <KeyboardAccelerator Key="F4" Modifiers="Menu" />
                            </MenuFlyoutItem.KeyboardAccelerators>
                        </MenuFlyoutItem>
                    </MenuFlyout>
                    <!--#endregion-->
                </Grid.Resources>

                <!--<local:SeparatorLine
                Grid.Row="0"
                Grid.ColumnSpan="2"
                VerticalAlignment="Top"
                Line1Brush="{StaticResource GradientLine1Brush}"
                Line2Brush="{StaticResource GradientLine2Brush}"
                SeparatorThickness="2" />-->

                <!--<Rectangle
                Grid.Row="0"
                Grid.ColumnSpan="2"
                Height="3"
                Margin="0,10,0,5"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Top"
                Fill="{StaticResource GradientHorizontalBrush}"
                RadiusX="3"
                RadiusY="3" />-->

                <!--<local:GridSplitter
                x:Name="GridSplitterHorizontal"
                Grid.RowSpan="3"
                Grid.Column="1"
                Width="5"
                Margin="0,10,0,5"
                HorizontalAlignment="Left"
                Background="{StaticResource GradientHorizontalBrush}" />-->

                <StackPanel
                    Grid.Row="1"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Vertical"
                    Spacing="20">
                    <StackPanel
                        HorizontalAlignment="Center"
                        Orientation="Vertical"
                        Spacing="10">
                        <TextBlock
                            x:Name="tbMessages"
                            HorizontalAlignment="Center"
                            FontSize="32"
                            Text="WindowsAppSDK v1.6.25" />
                        <TextBlock
                            x:Name="tbVersion"
                            HorizontalAlignment="Center"
                            FontSize="20"
                            Foreground="{StaticResource SecondaryBorderBrush}"
                            Text="{x:Bind local:App.DeviceModel}" />
                        <!--
                            If you want indeterminate behavior for the ProgressButton, don't set ProgressValue.
                        -->
                        <local:ProgressButton
                            x:Name="progressButton"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            ButtonBusy="{x:Bind IsBusy, Mode=OneWay}"
                            ButtonCornerRadius="5"
                            ButtonEvent="{x:Bind ProgressButtonClickEvent, Mode=OneWay}"
                            ButtonHeight="40"
                            ButtonText="Progress Button"
                            ButtonWidth="150"
                            EnableSpringAnimation="True"
                            ProgressValue="{x:Bind Amount, Mode=OneWay}" />
                    </StackPanel>
                    <Grid>
                        <local:AnimatedCirclesControl
                            x:Name="circles"
                            AnimationDuration="0.7"
                            AnimationFrequency="0.1"
                            CircleSize="16"
                            GradientColorOne="{StaticResource ACC2}"
                            GradientColorTwo="{StaticResource ACC1}"
                            IsRunning="False"
                            ScaleFactor="1.4"
                            UseRadialGradient="False" />
                        <Image
                            x:Name="imgSpin"
                            Width="32"
                            Height="32"
                            Margin="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Opacity="1.0"
                            Source="ms-appx:///Assets/Spinner2.png"
                            Visibility="Collapsed">
                            <Image.Resources>
                                <Storyboard
                                    x:Name="StoryboardSpin"
                                    AutoReverse="False"
                                    RepeatBehavior="Forever">
                                    <DoubleAnimation
                                        x:Name="dblAnimation"
                                        Storyboard.TargetName="spinnerTransform"
                                        Storyboard.TargetProperty="Angle"
                                        From="0"
                                        To="360"
                                        Duration="0:00:00.9" />
                                </Storyboard>
                            </Image.Resources>
                            <Image.RenderTransform>
                                <RotateTransform x:Name="spinnerTransform" CenterX="16" CenterY="16" />
                            </Image.RenderTransform>
                        </Image>
                        <Button
                            x:Name="btnRun"
                            Width="150"
                            MinHeight="40"
                            Padding="0,1,0,0"
                            HorizontalAlignment="Center"
                            VerticalContentAlignment="Center"
                            Click="ButtonOnClick"
                            Content="Enhanced Button"
                            IsEnabled="{x:Bind IsBusy, Mode=OneWay, Converter={StaticResource BooleanInverter}}"
                            Style="{StaticResource EnhancedButton}" />
                    </Grid>
                    <StackPanel Orientation="Horizontal" Spacing="24">
                        <ToggleSwitch
                            x:Name="tsBlur"
                            Margin="0,5,0,0"
                            HorizontalAlignment="Center"
                            Header=""
                            IsOn="False"
                            OffContent="Blur Composition Off"
                            OnContent="Blur Composition On"
                            Style="{StaticResource GlowSwitch}"
                            Toggled="OnSwitchToggled" />
                        <CheckBox
                            x:Name="cbTest"
                            Margin="0,-1,0,0"
                            HorizontalAlignment="Center"
                            Checked="CheckBoxChanged"
                            Content="Use SurfaceBrush"
                            IsChecked="True"
                            Style="{StaticResource GlowCheckBox}"
                            Unchecked="CheckBoxChanged" />
                    </StackPanel>
                    <Slider
                        x:Name="sldrDays"
                        MinWidth="120"
                        Margin="10,6,10,2"
                        HorizontalAlignment="Center"
                        Maximum="365"
                        Minimum="1"
                        Style="{StaticResource GlowSlider}"
                        ValueChanged="SliderDaysChanged"
                        Value="180" />
                    <!--
                        https://learn.microsoft.com/en-us/windows/apps/design/controls/flipview#specify-the-look-of-the-items
                    -->
                    <FlipView
                        x:Name="Flipper"
                        MaxWidth="200"
                        MaxHeight="100"
                        Background="Transparent">
                        <ItemsPanelTemplate>
                            <VirtualizingStackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                        <FlipView.ItemTemplate>
                            <DataTemplate x:DataType="x:String">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="32" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <local:CompositionShadow
                                        Grid.Row="0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        BlurRadius="2"
                                        OffsetX="2"
                                        OffsetY="2"
                                        ShadowOpacity="0.7"
                                        Color="#76b9ed">
                                        <TextBlock
                                            FontSize="{StaticResource FontSizeLarge}"
                                            Foreground="{StaticResource PrimaryBrush}"
                                            Style="{StaticResource TitleTextBlockStyle}"
                                            Text="{x:Bind Mode=OneWay, Converter={StaticResource FullPathToFile}}" />
                                    </local:CompositionShadow>
                                    <Image
                                        Grid.Row="1"
                                        Source="{Binding}"
                                        Stretch="Uniform" />
                                </Grid>
                            </DataTemplate>
                        </FlipView.ItemTemplate>
                    </FlipView>
                    <!--  The SelectedPageIndex is bound to the FlipView to keep the PipsPager in sync.  -->
                    <PipsPager
                        x:Name="FlipViewPipsPager"
                        HorizontalAlignment="Center"
                        MaxVisiblePips="10"
                        NextButtonStyle="{StaticResource NextButtonStyle}"
                        NextButtonVisibility="Visible"
                        NumberOfPages="{x:Bind Pictures.Count}"
                        PreviousButtonStyle="{StaticResource PreviousButtonStyle}"
                        PreviousButtonVisibility="Visible"
                        SelectedPageIndex="{x:Bind Path=Flipper.SelectedIndex, Mode=TwoWay}" />

                    <StackPanel
                        x:Name="SettingsBar"
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="20">
                        <Button
                            x:Name="SettingsButton"
                            Content="{StaticResource Settings}"
                            Flyout="{StaticResource SettingsFlyout}"
                            FontFamily="Segoe MDL2 Assets"
                            FontSize="{StaticResource FontSizeLarge}" />
                        <ToggleButton
                            x:Name="tbMessagePane"
                            Checked="ToggleOnChanged"
                            Style="{StaticResource ToolbarToggleButton}"
                            Unchecked="ToggleOnChanged">
                            <FontIcon FontSize="24" Glyph="{StaticResource Message}" />
                        </ToggleButton>
                        <Button
                            x:Name="tbButton"
                            Click="ToolbarButtonOnClick"
                            Content="Toolbar Button"
                            Style="{StaticResource ToolbarButton}">
                            <Button.Flyout>
                                <!--
                                    If LightDismissOverlayMode is "On", the Page background will be darkened when it's opened.
                                -->
                                <Flyout
                                    x:Name="flyoutText"
                                    AreOpenCloseAnimationsEnabled="True"
                                    LightDismissOverlayMode="Off"
                                    Opened="flyoutTextOnOpened"
                                    ShowMode="TransientWithDismissOnPointerMoveAway">
                                    <Flyout.FlyoutPresenterStyle>
                                        <Style TargetType="FlyoutPresenter">
                                            <Setter Property="BorderThickness" Value="0" />
                                            <Setter Property="Background" Value="Transparent" />
                                            <Setter Property="IsDefaultShadowEnabled" Value="True" />
                                            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                                            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                                            <Setter Property="IsTabStop" Value="True" />
                                            <Setter Property="TabNavigation" Value="Cycle" />
                                        </Style>
                                    </Flyout.FlyoutPresenterStyle>
                                    <StackPanel
                                        Margin="0"
                                        Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                                        BorderBrush="{StaticResource GradientFlyoutBrush}"
                                        BorderThickness="3"
                                        CornerRadius="5"
                                        Orientation="Vertical">
                                        <local:CompositionShadow
                                            Margin="16"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            BlurRadius="2"
                                            OffsetX="2"
                                            OffsetY="2"
                                            ShadowOpacity="0.8"
                                            Color="#000000">
                                            <TextBlock Text="I'm an example of a Flyout, I'll close myself in a few seconds." TextWrapping="Wrap" />
                                        </local:CompositionShadow>
                                    </StackPanel>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Spacing="20">
                        <TextBox
                            MinWidth="200"
                            MinHeight="28"
                            Background="Transparent"
                            KeyUp="TextBoxOnKeyUp"
                            PlaceholderText="First name" />
                        <TextBox
                            MinWidth="200"
                            MinHeight="28"
                            Background="Transparent"
                            KeyUp="TextBoxOnKeyUp"
                            PlaceholderText="First name"
                            Style="{StaticResource MinimalTextBox}" />
                    </StackPanel>
                    <!--<StackPanel
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="20">
                    <StackPanel.Resources>
                        <Style TargetType="Image">
                            <Setter Property="Width" Value="50" />
                            <Setter Property="Opacity" Value="0.9" />
                            <Setter Property="Stretch" Value="Uniform" />
                        </Style>
                    </StackPanel.Resources>
                    <Image Source="ms-appx:///Assets/AltIcon1.png" />
                    <Image Source="ms-appx:///Assets/AltIcon2.png" />
                    <Image Source="ms-appx:///Assets/AltIcon3.png" />
                    <Image Source="ms-appx:///Assets/AltIcon4.png" />
                    <Image Source="ms-appx:///Assets/AltIcon5.png" />
                </StackPanel>-->
                </StackPanel>

                <!--#region [InfoBar Content]-->
                <StackPanel
                    Grid.Row="2"
                    Grid.ColumnSpan="2"
                    Margin="0"
                    VerticalAlignment="Bottom">
                    <!--
                        Wrap this in a StackPanel/Grid to support AnimateUIElementOffset
                        This is my "new & improved" version of the original AutoCloseInfoBar.
                    -->
                    <local:SlideBar
                        x:Name="infoBar"
                        AutoCloseInterval="5000"
                        Background="{StaticResource GradientBarBrush}"
                        Foreground="{StaticResource PrimaryBrush}"
                        Severity="Informational"
                        SlideUp="True" />
                </StackPanel>
                <!--#endregion-->

            </Grid>


        </SplitView>

        <!--#region [blur test via control instead of compositor]-->
        <Image
            x:Name="blurTest"
            Width="1000"
            Margin="12,10,10,10"
            IsHitTestVisible="False"
            IsTabStop="False"
            Stretch="Uniform"
            Visibility="Collapsed" />
        <!--#endregion-->

    </Grid>

</Page>
