<?xml version="1.0" encoding="utf-8" ?>
<Page
    x:Class="UI_Demo.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="using:UI_Demo"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="Transparent"
    mc:Ignorable="d">

    <Grid x:Name="root">

        <Image
            x:Name="blurTest"
            Width="1000"
            Stretch="Uniform"
            Visibility="Collapsed" />

        <Grid
            x:Name="host"
            Background="#00111111"
            PointerPressed="HostGridOnPointerPressed">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.Resources>
                <!--#region [Context Flyout Menu]-->
                <MenuFlyout
                    x:Name="TitlebarMenuFlyout"
                    x:FieldModifier="public"
                    Placement="BottomEdgeAlignedLeft">
                    <MenuFlyoutItem
                        Click="MenuFlyoutItemOnClick"
                        IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                        Tag="{x:Bind TitlebarMenuFlyout}"
                        Text="Hide this flyout">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="{StaticResource PointerHand}" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutItem
                        Click="MenuFlyoutItemOnClick"
                        IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                        Tag="ActionToken"
                        Text="Signal cancel token">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="{StaticResource NoiseCancelation}" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutItem
                        Click="MenuFlyoutItemOnClick"
                        IsEnabled="{x:Bind local:App.Profile.FirstRun.Equals(x:True), Mode=OneWay}"
                        Tag="ActionFirstRun"
                        Text="Reset FirstRun">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="{StaticResource ActionCenter}" />
                        </MenuFlyoutItem.Icon>
                    </MenuFlyoutItem>
                    <MenuFlyoutSeparator Width="200" />
                    <MenuFlyoutItem
                        Click="MenuFlyoutItemOnClick"
                        IsEnabled="{x:Bind IsBusy.Equals(x:False), Mode=OneWay}"
                        Tag="ActionClose"
                        Text="Close Application">
                        <MenuFlyoutItem.Icon>
                            <FontIcon Glyph="{StaticResource PowerButton}" />
                        </MenuFlyoutItem.Icon>
                        <MenuFlyoutItem.KeyboardAccelerators>
                            <KeyboardAccelerator Key="F4" Modifiers="Menu" />
                        </MenuFlyoutItem.KeyboardAccelerators>
                    </MenuFlyoutItem>
                </MenuFlyout>
                <!--#endregion-->
            </Grid.Resources>

            <local:SeparatorLine
                Grid.Row="0"
                Grid.ColumnSpan="2"
                VerticalAlignment="Top"
                Line1Brush="{StaticResource GradientLine1Brush}"
                Line2Brush="{StaticResource GradientLine2Brush}"
                SeparatorThickness="2" />

            <!--#region [Channel Messages]-->
            <ListView
                x:Name="lvChannelMessages"
                Grid.Row="1"
                Grid.RowSpan="2"
                Grid.Column="1"
                Margin="0,0,10,0"
                HorizontalAlignment="Right"
                VerticalAlignment="Stretch"
                Opacity="0.7">
                <!--<ListView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid HorizontalChildrenAlignment="Left" Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListView.ItemsPanel>-->
                <ListView.Transitions>
                    <TransitionCollection>
                        <EdgeUIThemeTransition />
                    </TransitionCollection>
                </ListView.Transitions>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock
                            FontSize="{StaticResource FontSizeNormal}"
                            Foreground="{StaticResource GradientListBrush}"
                            Text="{Binding}" />
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
            <!--#endregion-->

            <StackPanel
                Grid.Row="1"
                Grid.ColumnSpan="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Vertical"
                Spacing="20">
                <StackPanel
                    HorizontalAlignment="Center"
                    Orientation="Vertical"
                    Spacing="10">
                    <TextBlock
                        x:Name="tbMessages"
                        HorizontalAlignment="Center"
                        FontSize="32"
                        Text="WindowsAppSDK v1.6.25" />
                    <TextBlock
                        x:Name="tbVersion"
                        HorizontalAlignment="Center"
                        FontSize="20"
                        Foreground="{StaticResource SecondaryBorderBrush}"
                        Text="{x:Bind local:App.DeviceModel}" />
                    <!--
                        If you want indeterminate behavior, don't set ProgressValue.
                    -->
                    <local:ProgressButton
                        x:Name="progressButton"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        ButtonBusy="{x:Bind IsBusy, Mode=OneWay}"
                        ButtonCornerRadius="5"
                        ButtonEvent="{x:Bind ProgressButtonClickEvent, Mode=OneWay}"
                        ButtonHeight="40"
                        ButtonText="Progress Button"
                        ButtonWidth="150"
                        ProgressValue="{x:Bind Amount, Mode=OneWay}" />
                </StackPanel>
                <Grid>
                    <local:AnimatedCirclesControl
                        x:Name="circles"
                        AnimationDuration="0.7"
                        AnimationFrequency="0.1"
                        CircleSize="16"
                        GradientColorOne="{StaticResource ACC2}"
                        GradientColorTwo="{StaticResource ACC1}"
                        IsRunning="False"
                        ScaleFactor="1.4"
                        UseRadialGradient="False" />
                    <Image
                        x:Name="imgSpin"
                        Width="32"
                        Height="32"
                        Margin="0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Opacity="1.0"
                        Source="ms-appx:///Assets/Spinner2.png"
                        Visibility="Collapsed">
                        <Image.Resources>
                            <Storyboard
                                x:Name="StoryboardSpin"
                                AutoReverse="False"
                                RepeatBehavior="Forever">
                                <DoubleAnimation
                                    x:Name="dblAnimation"
                                    Storyboard.TargetName="spinnerTransform"
                                    Storyboard.TargetProperty="Angle"
                                    From="0"
                                    To="360"
                                    Duration="0:00:00.9" />
                            </Storyboard>
                        </Image.Resources>
                        <Image.RenderTransform>
                            <RotateTransform x:Name="spinnerTransform" CenterX="16" CenterY="16" />
                        </Image.RenderTransform>
                    </Image>
                    <Button
                        x:Name="btnRun"
                        Width="150"
                        MinHeight="40"
                        Padding="0,1,0,0"
                        HorizontalAlignment="Center"
                        VerticalContentAlignment="Center"
                        Click="ButtonOnClick"
                        Content="Enhanced Button"
                        IsEnabled="{x:Bind IsBusy, Mode=OneWay, Converter={StaticResource BooleanInverter}}"
                        Style="{StaticResource EnhancedButton}" />
                </Grid>
                <CheckBox
                    x:Name="cbTest"
                    HorizontalAlignment="Center"
                    Checked="CheckBoxChanged"
                    Content="Use SurfaceBrush"
                    IsChecked="True"
                    Style="{StaticResource GlowCheckBox}"
                    Unchecked="CheckBoxChanged" />
                <ToggleSwitch
                    x:Name="tsBlur"
                    HorizontalAlignment="Center"
                    Header=""
                    IsOn="False"
                    OffContent="Blur Composition Off"
                    OnContent="Blur Composition On"
                    Style="{StaticResource GlowSwitch}"
                    Toggled="OnSwitchToggled" />
                <Slider
                    x:Name="sldrDays"
                    MinWidth="120"
                    Margin="10,6,10,2"
                    HorizontalAlignment="Center"
                    Maximum="365"
                    Minimum="1"
                    Style="{StaticResource GlowSlider}"
                    ValueChanged="SliderDaysChanged"
                    Value="180" />
                <!--
                    https://learn.microsoft.com/en-us/windows/apps/design/controls/flipview#specify-the-look-of-the-items
                -->
                <FlipView
                    x:Name="Flipper"
                    MaxWidth="200"
                    MaxHeight="100"
                    Background="Transparent">
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                    <FlipView.ItemTemplate>
                        <DataTemplate x:DataType="x:String">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="32" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <local:CompositionShadow
                                    Grid.Row="0"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    BlurRadius="2"
                                    OffsetX="2"
                                    OffsetY="2"
                                    ShadowOpacity="0.7"
                                    Color="#76b9ed">
                                    <TextBlock
                                        FontSize="{StaticResource FontSizeLarge}"
                                        Foreground="{StaticResource PrimaryBrush}"
                                        Style="{StaticResource TitleTextBlockStyle}"
                                        Text="{x:Bind Mode=OneWay, Converter={StaticResource FullPathToFile}}" />
                                </local:CompositionShadow>
                                <Image
                                    Grid.Row="1"
                                    Source="{Binding}"
                                    Stretch="Uniform" />
                            </Grid>
                        </DataTemplate>
                    </FlipView.ItemTemplate>
                </FlipView>
                <!--  The SelectedPageIndex is bound to the FlipView to keep the PipsPager in sync.  -->
                <PipsPager
                    x:Name="FlipViewPipsPager"
                    HorizontalAlignment="Center"
                    MaxVisiblePips="10"
                    NextButtonStyle="{StaticResource NextButtonStyle}"
                    NextButtonVisibility="Visible"
                    NumberOfPages="{x:Bind Pictures.Count}"
                    PreviousButtonStyle="{StaticResource PreviousButtonStyle}"
                    PreviousButtonVisibility="Visible"
                    SelectedPageIndex="{x:Bind Path=Flipper.SelectedIndex, Mode=TwoWay}" />

                <StackPanel Orientation="Horizontal" Spacing="20">
                    <ToggleButton
                        x:Name="tbTest"
                        Checked="ToggleOnChanged"
                        Style="{StaticResource ToolbarToggleButton}"
                        Unchecked="ToggleOnChanged">
                        <FontIcon FontSize="24" Glyph="{StaticResource Unlock}" />
                    </ToggleButton>
                    <Button
                        x:Name="tbButton"
                        Click="ToolbarButtonOnClick"
                        Content="Toolbar Button"
                        Style="{StaticResource ToolbarButton}">
                        <Button.Flyout>
                            <!--
                                If LightDismissOverlayMode is "On", the Page background will be darkened when it's opened.
                            -->
                            <Flyout
                                x:Name="flyoutText"
                                AreOpenCloseAnimationsEnabled="True"
                                LightDismissOverlayMode="Off"
                                Opened="flyoutTextOnOpened"
                                ShowMode="TransientWithDismissOnPointerMoveAway">
                                <Flyout.FlyoutPresenterStyle>
                                    <Style TargetType="FlyoutPresenter">
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="IsDefaultShadowEnabled" Value="True" />
                                        <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                                        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                                        <Setter Property="IsTabStop" Value="True" />
                                        <Setter Property="TabNavigation" Value="Cycle" />
                                    </Style>
                                </Flyout.FlyoutPresenterStyle>
                                <StackPanel
                                    Margin="0"
                                    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                                    BorderBrush="{StaticResource GradientFlyoutBrush}"
                                    BorderThickness="3"
                                    CornerRadius="5"
                                    Orientation="Vertical">
                                    <local:CompositionShadow
                                        Margin="16"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        BlurRadius="2"
                                        OffsetX="2"
                                        OffsetY="2"
                                        ShadowOpacity="0.8"
                                        Color="#000000">
                                        <TextBlock Text="I'm an example of a Flyout, I'll close myself in a few seconds." TextWrapping="Wrap" />
                                    </local:CompositionShadow>
                                </StackPanel>
                            </Flyout>
                        </Button.Flyout>
                    </Button>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Spacing="20">
                    <TextBox
                        MinWidth="200"
                        MinHeight="28"
                        Background="Transparent"
                        KeyUp="TextBoxOnKeyUp"
                        PlaceholderText="First name" />
                    <TextBox
                        MinWidth="200"
                        MinHeight="28"
                        Background="Transparent"
                        KeyUp="TextBoxOnKeyUp"
                        PlaceholderText="First name"
                        Style="{StaticResource MinimalTextBox}" />
                </StackPanel>
                <!--<StackPanel
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="20">
                    <StackPanel.Resources>
                        <Style TargetType="Image">
                            <Setter Property="Width" Value="50" />
                            <Setter Property="Opacity" Value="0.9" />
                            <Setter Property="Stretch" Value="Uniform" />
                        </Style>
                    </StackPanel.Resources>
                    <Image Source="ms-appx:///Assets/AltIcon1.png" />
                    <Image Source="ms-appx:///Assets/AltIcon2.png" />
                    <Image Source="ms-appx:///Assets/AltIcon3.png" />
                    <Image Source="ms-appx:///Assets/AltIcon4.png" />
                    <Image Source="ms-appx:///Assets/AltIcon5.png" />
                </StackPanel>-->
            </StackPanel>

            <!--#region [InfoBar Content]-->
            <StackPanel
                Grid.Row="2"
                Grid.ColumnSpan="2"
                Margin="0"
                VerticalAlignment="Bottom">
                <!--
                    Wrap this in a StackPanel/Grid to support AnimateUIElementOffset
                    This is my "new & improved" version of the original AutoCloseInfoBar.
                -->
                <local:SlideBar
                    x:Name="infoBar"
                    AutoCloseInterval="5000"
                    Background="{StaticResource GradientBarBrush}"
                    Foreground="{StaticResource PrimaryBrush}"
                    Severity="Informational"
                    SlideUp="True" />
            </StackPanel>
            <!--#endregion-->

        </Grid>

    </Grid>

</Page>
